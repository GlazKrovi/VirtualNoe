@startuml VirtualNoe

!theme reddress-darkgreen

package Models
{
    interface IUser {
        + name() : String
        + password() : String
        + email() : String
    }

    interface IPlayer extends IUser
    {
        + level() : Integer /' sum of his creatures' exp '/
        + money() : Integer
        + items()
        + creatures() : HasMany
        + earn(money : Integer)
        + lose(money : Integer)
    }
    IPlayer" 1 " o--> " * "IItem : has
    IPlayer" 1 " o--> " * "ICreature : has

    class User implements IPlayer
    {
        + {static} createWithItems(data : Any[*])
        + name() : String
        + password() : String
        + level() : Integer
        + money() : Integer
        + items()
        +  creatures() : HasMany
        + earn(money : Integer)
        + lose(money : Integer)
        # foods()
        # boosts()
    }

    interface IItem
    {
        + id() : Integer
        + name() : String
        + type() : String
        + price() : Integer
        + users() : BelongsToMany /' get owners '/
        + usage() : UseStrategy
    }
    IItem *--> UseStrategy : # UseStrategy\nusage

    abstract class Item implements IItem
    {
        + id() : Integer
        + name() : String
        + type() : String
        + price() : Integer
        + users()
    }

    class Food extends Item
    {
        + calories() : Integer
    }

    class Boost extends Item
    {
        + energy() : Integer
    }

    /' TODO '/
    class Drug extends Item
    {
        + healing() : Integer
    }

    interface ICreature
    {
        + id() : Integer
        + name() : String
        + life() : Integer
        + level() : Integer
        + hunger() : Integer
        + stamina() : Integer
        + species() : String
        + levelUp(experience : Integer)
        + feed(calories : Integer) 
        + makeHungry(calories : Integer) 
        + boost(energy : Integer) 
        + tires(energy : Integer) 
        + heal(life : Integer) 
        + hurt(life : Integer) 
        + user() : BelongsTo
        + texture() : String
    }

    class Creature implements ICreature
    {
        # {readonly} MAX_LEVEL = 1000
        # {readonly} MAX_LIFE = 100
        # {readonly} MAX_STAMINA = 100
        # {readonly} MAX_HUNGER = 100
        # {readonly} MIN_INFO_VALUE = 0
        + id() : Integer
        + name() : String
        + life() : Integer
        + level() : Integer
        + hunger() : Integer
        + stamina() : Integer
        + species() : String
        + levelUp(experience : Integer)
        + feed(calories : Integer) 
        + makeHungry(calories : Integer) 
        + boost(energy : Integer) 
        + tires(energy : Integer) 
        + heal(life : Integer) 
        + hurt(life : Integer) 
        + user() : BelongsTo
        + texture() : String
    }

    /' Item Strategy '/
    abstract UseStrategy {
        # CREATURE_ID : Integer
        # VALUE : Integer
        # UseStrategy(creatureId : Integer, value : Integer)
        + {abstract} execute()
    }

    class Feeding extends UseStrategy{
        + Feeding(creatureId : Integer, value : Integer)
        + execute()
    }

    class Boosting extends UseStrategy{
        + Boosting(creatureId : Integer, value : Integer)
        + execute()
    }
    /' TODO '/
}

package Controllers
{
    class LogController
    {
        +  show()
        +  showAll()
    }

    class InventoryController   /' use IPlayer '/
    {
        + show(message : String)
        + use(creatureId : Integer, itemId : Integer, type : String)
        + quantityOf(player : IPlayer, item : Item): Integer
        + add(player : IPlayer, item : Item, quantity : Integer)
        + remove(player : IPlayer, item : Item, quantity : Integer)
    }
    InventoryController" 1 " ..> " * "IPlayer : <<use>>
    InventoryController" 1 " ..> " * "IItem : <<use>>

    class UserController {
        + connect(request : Request)
        + create(request : Request)
        + updatePassword(request : Request)
        + delete(request : Request)
        + disconnect()
        + forget(request : Request)
    }
    UserController ..> IUser : controls

    class PlayerController {
        + earnMoney(request : Request)
        + loseMoney(request : Request)
    }
    PlayerController ..> IPlayer : controls

    class CreatureController {
        + index() : Collection
        + create()
        + store(Request $request)
        + show(Creature $creature)
        + edit(Creature $creature)
        + update(Request $request, Creature $creature)
        + destroy(Creature $creature)
        + feed(int $creatureId, int $calories)
        + boost(int $creatureId, int $energy)
        + levelUp(int $creatureId, int $exp)
    }
    CreatureController ..> ICreature : controls
}

@enduml